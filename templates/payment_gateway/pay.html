<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <title>Pay</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Pay with Razorpay">
    <meta name="lang" content="en">
    <meta name="MobileOptimized" content="width">
    <meta name="HandheldFriendly" content="true">
    <link rel="icon" href="/static/index/favicon.ico"/>
    <!--Google Font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <!--Search Box & NavBar functionality-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

    <!--for html background-->
    <script src="https://cdn.jsdelivr.net/npm/granim@2.0.0/dist/granim.min.js"></script>

    <!--CSS files-->
    <link rel="shortcut icon" href="/static/index/kisan_seva_logo.webp">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/static/css/products_home.css">
</head>

<body>
    <div class="site-container">
        <header>
            <div class="accessibility_top_nav">
                <div class="wrapper">
                    <div class="region region-header-top">
                        <div id="block-cmf-content-header-region-block" class="block block-cmf-content first last odd">
                            <div class="wrapper common-wrapper" style="background-color: lightgrey;">
                                <div class="container common-container">
                                    <div class="common-left clearfix" style="height: 85px;">
                                        <!-- Updated the ul style to include centering properties -->
                                        <ul
                                            style="display: flex; justify-content: center; align-items: center; height: 100%; margin: 0; padding: 0;">
                                            <li style="list-style: none;">
                                                <!-- Added a list item element for proper HTML structure -->
                                                <a href="/">
                                                    <img src="/static/index/kisan_seva_logo.webp" alt="kisan seva logo"
                                                        style="height: 70px; border-radius: 100px;">
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Page Navigation goes here -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container">
                    <a class="navbar-brand">Kisan Seva</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNavDropdown">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="/" aria-label="Homepage">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    About Us
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item" href="/mission"
                                            aria-label="Our Mission & Vision">Mission &
                                            Vision</a>
                                    </li>
                                    <li><a class="dropdown-item" href="/about" aria-label="About">Our Team</a></li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Services
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item" href="/prediction" aria-label="Crop Prediction">Crop
                                            Prediction</a></li>
                                    <li><a class="dropdown-item" href="/marketplace" aria-label="Shop">Shop</a></li>
                                    <li><a class="dropdown-item" href="/loan" aria-label="Agri Loan">Agri Loan</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/articles_home" aria-label="Articles Homepage">Articles</a>
                            </li>
                        </ul>
                        <ul class="navbar-nav ms-auto">

                            <!-- Language Dropdown
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownLang" role="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Language
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownLang">
                                    <li><a class="dropdown-item"
                                            href="https://kisanseva-shop.translate.goog/?_x_tr_sl=en&_x_tr_tl=hi&_x_tr_hl=en-US&_x_tr_pto=wapp">हिंदी</a>
                                    </li>
                                </ul>
                            </li> -->

                            <!-- Account Info and Logout Buttons -->
                            {% if session.logged_in %}
                            <li class="nav-item">
                                <a class="nav-link" href="{{ url_for('account') }}">
                                    <i class="bi bi-person-circle"></i> Account
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link logout-button" href="{{ url_for('logout') }}">
                                    <i class="bi bi-box-arrow-right"></i> Logout
                                </a>
                            </li>
                            {% else %}
                            <li class="nav-item">
                                <a class="nav-link btn-signin" href="/login">Sign In</a>
                            </li>
                            <li class="nav-item">
                                <a class="btn btn-signup ms-3" href="/signup" role="button">Sign Up</a>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </nav>
        </header>


        <main class="content-wrap">
            <div class="container my-5">
                <h2 class="text-center mb-4">Complete Your Payment</h2>
                <div class="card">
                    <div class="card-body">
                        <form id="razorpay-form" method="POST" action="{{ url_for('payment_success') }}">
                            <input type="hidden" id="order_id" name="order_id" value="{{ order_id }}">

                            <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id">
                            <input type="hidden" name="razorpay_order_id" id="razorpay_order_id">
                            <input type="hidden" name="razorpay_signature" id="razorpay_signature">

                            <input type="hidden" id="amount" name="amount" value="{{ amount }}">
                            <input type="hidden" id="currency" name="currency" value="{{ currency }}">
                            <input type="hidden" id="product_name" name="product_name" value="{{ product_name }}">
                            <input type="hidden" id="first_name" name="first_name" value="{{ first_name }}">
                            <input type="hidden" id="last_name" name="last_name" value="{{ last_name }}">
                            <input type="hidden" id="email" name="email" value="{{ email }}">
                            <input type="hidden" id="contact" name="contact" value="{{ contact }}">
                            <input type="hidden" name="state" value="{{ state }}">
                            <input type="hidden" name="address" value="{{ address }}">
                            <button type="button" id="pay-button" class="btn btn-primary w-100">Pay Now</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Razorpay SDK -->
            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
            <script>
                document.getElementById('pay-button').onclick = function (e) {
                    var options = {
                        "key": "rzp_test_BPrcISiqCRRTx4", // Enter the Key ID generated from the Dashboard
                        "amount": document.getElementById('amount').value, // Amount is in currency subunits. Default currency is INR. Hence, 50000 means 50000 paise or ₹500.
                        "currency": document.getElementById('currency').value,
                        "name": "{{ first_name }} {{ last_name }}",
                        "description": document.getElementById('product_name').value + " - ₹" + document.getElementById('amount').value,
                        "image": "https://kisanseva.shop/kisan_seva_logo",
                        "order_id": document.getElementById('order_id').value, // This is a sample Order ID. Pass the `id` obtained in the response of the previous step.
                        "handler": function (response) {
                            // Handle the payment response
                            alert("Payment successful. Payment ID: " + response.razorpay_payment_id);
                            document.getElementById('razorpay_payment_id').value = response.razorpay_payment_id;
                            document.getElementById('razorpay_order_id').value = response.razorpay_order_id;
                            document.getElementById('razorpay_signature').value = response.razorpay_signature;
                            document.getElementById('razorpay-form').submit();
                        },
                        "prefill": {
                            "name": "{{ first_name }} {{ last_name }}",
                            "email": "{{ email }}",
                            "contact": "+91 {{ contact }}"
                        },
                        "notes": {
                            "state": "{{ state }}",
                            "address": "{{ address }}"
                        },
                        "theme": {
                            "color": "#3399cc"
                        }
                    };
                    var rzp = new Razorpay(options);
                    rzp.open();
                    e.preventDefault();
                }
            </script>
        </main>

        <!-- footer-->
        <footer class="footer mt-auto">
            <div class="container text-center text-md-left">
                <div class="row">
                    <div class="col-md-3 footer-column">
                        <h5>Services</h5>
                        <div>
                            <a href="/predict">Yield Prediction</a>
                        </div>
                        <div>
                            <a href="/marketplace">Shop</a>
                        </div>
                    </div>
                    <div class="col-md-3 footer-column">
                        <h5>About</h5>
                        <div>
                            <a href="/about">Our Team</a>
                        </div>
                        <div>
                            <a href="/mission">Mission & Vision</a>
                        </div>
                        <div>
                            <a href="https://forms.gle/iRf3eKC6bq9XV21B7">Feedback</a>
                        </div>
                        <div>
                            <a href="https://forms.gle/Gb3K34tQgGyLmazL8">Contact Us</a>
                        </div>
                    </div>
                    <div class="col-md-3 footer-column">
                        <h5>Legal</h5>
                        <div>
                            <a href="/privacy_policy">Privacy Policies</a>
                        </div>
                        <div>
                            <a href="/terms_and_conditions">Term & Conditions</a>
                        </div>
                        <div>
                            <a href="/disclaimer">Disclaimer</a>
                        </div>
                    </div>
                    <div class="col-md-3 footer-column">
                        <h5>Connect</h5>
                        <div class="social-icons">
                            <a href="#"><img src="https://img.icons8.com/ios-filled/50/ffffff/facebook-new.png"
                                    alt="Facebook" style="width: 24px;"></a>
                            <a href="https://twitter.com/kisanseva24"><img
                                    src="https://img.icons8.com/ios-filled/50/ffffff/twitter.png" alt="Twitter"
                                    style="width: 24px;"></a>
                            <a href="https://www.instagram.com/kisanseva.shop/"><img
                                    src="https://img.icons8.com/ios-filled/50/ffffff/instagram-new.png" alt="Instagram"
                                    style="width: 24px;"></a>
                            <a href="https://www.youtube.com/@Kisanseva-s7s"><img src="https://img.icons8.com/ios-filled/50/ffffff/youtube.png" alt="Youtube"
                                    style="width: 24px;"></a>
                        </div>
                        <a href="#">Newsletter</a>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <p>Copyright © 2024 Kisan Seva. All rights reserved.</p>
                    <!-- <p>Total Visits: {{ visitor_count }}</p> -->
                </div>
            </div>
        </footer>

    </div>
</body>

</html>